document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".works-section .filter-btn"),t=document.querySelectorAll(".insights-section .filter-btn"),c=document.querySelectorAll(".works-grid .work-card"),i=document.querySelectorAll(".insights-grid .insight-card");e.forEach(l=>{l.addEventListener("click",function(){const s=this.dataset.filter;e.forEach(o=>o.classList.remove("active")),this.classList.add("active"),c.forEach(o=>{s==="all"||(o.dataset.tags||"").includes(s)?o.classList.remove("hidden"):o.classList.add("hidden")})})}),t.forEach(l=>{l.addEventListener("click",function(){const s=this.dataset.filter;t.forEach(o=>o.classList.remove("active")),this.classList.add("active"),i.forEach(o=>{s==="all"||(o.dataset.tags||"").includes(s)?o.classList.remove("hidden"):o.classList.add("hidden")})})}),document.addEventListener("click",function(l){const s=l.target.closest(".clickable-insight");if(s){const o=s.dataset.href,r=s.getAttribute("href");if(console.log("ğŸ“‹ Insightã‚¯ãƒªãƒƒã‚¯:",o,"href:",r),r&&r.startsWith("/ja/portfolio/")&&!r.includes("#")){console.log("ğŸŒ Insight URLé·ç§»ãªã®ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚’è¨±å¯:",r);return}o&&o.startsWith("#")?(l.preventDefault(),s.closest(".related-insights")?(d(),h(),setTimeout(()=>{const g=document.getElementById("insights");g&&(g.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{f(o.slice(1))},800))},100)):(console.log("ãƒ¡ã‚¤ãƒ³Insightsã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯:",o),f(o.slice(1)))):console.log("âš ï¸ Insight targetIdãŒç„¡åŠ¹ã¾ãŸã¯URLé·ç§»:",o,r)}}),document.addEventListener("click",function(l){const s=l.target.closest(".clickable-section-nav");if(s){const o=s.dataset.target;console.log("ğŸ§­ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³:",o),d(),h(),setTimeout(()=>{const r=document.getElementById(o);r&&(console.log("ğŸ“œ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«:",o),r.scrollIntoView({behavior:"smooth",block:"start"}))},100);return}}),document.addEventListener("click",function(l){console.log("ğŸ–±ï¸ ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ:",l.target);const s=l.target.closest(".clickable-work");if(console.log("ğŸ¯ .clickable-work è¦ç´ :",s),s){const o=s.dataset.href,r=s.getAttribute("href");if(console.log("ğŸ“‹ ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰:",o,"href:",r,"ã‚«ãƒ¼ãƒ‰è¦ç´ :",s),r&&r.startsWith("/ja/portfolio/")&&!r.includes("#")){console.log("ğŸŒ URLé·ç§»ãªã®ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚’è¨±å¯:",r);return}if(o&&o.startsWith("#")){l.preventDefault(),console.log("ğŸ” ã‚«ãƒ¼ãƒ‰ã®ã‚¯ãƒ©ã‚¹ä¸€è¦§:",s.className),console.log("ğŸ·ï¸ ã‚«ãƒ¼ãƒ‰ã®dataå±æ€§:",s.dataset);const g=s.closest(".topics-section"),L=s.closest(".works-section"),b=s.closest(".related-works");console.log("ğŸ” è¦ªè¦ç´ æ¤œç´¢çµæœ:"),console.log("  - topics-section:",g),console.log("  - works-section:",L),console.log("  - related-works:",b),console.log("  - ç¾åœ¨ã®URL:",window.location.href),g||L||b?(console.log("âœ¨ ç‰¹åˆ¥é·ç§»å‡¦ç†é–‹å§‹:",o),console.log("ğŸ“¤ ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ã¾ã™..."),d(),h(),setTimeout(()=>{const S=document.getElementById("works");console.log("ğŸ¯ Worksã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¤œç´¢çµæœ:",S),S?(console.log("ğŸ“œ Worksã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–‹å§‹..."),S.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{console.log("ğŸš€ æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ã‚’è¡¨ç¤º:",o.slice(1)),k(o.slice(1))},800)):console.error("âŒ Worksã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")},100)):(console.log("â¡ï¸ ãƒ¡ã‚¤ãƒ³Worksã‚«ãƒ¼ãƒ‰ - ç›´æ¥é·ç§»:",o),k(o.slice(1)))}else console.log("âš ï¸ targetIdãŒç„¡åŠ¹ã¾ãŸã¯URLé·ç§»:",o,r)}else console.log("âŒ .clickable-work è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")});const n=document.getElementById("back-to-insights");n&&n.addEventListener("click",h),document.querySelectorAll(".clickable-back-to-list").forEach(l=>{l.addEventListener("click",function(){document.querySelector(".insight-detail-section:not(.hidden)")?h():d()})});const w=document.getElementById("back-to-list-card");w&&w.addEventListener("click",d),document.querySelectorAll(".back-to-list-card").forEach(l=>{l.addEventListener("click",d)});const a=window.location.hash.slice(1);if(a){if(document.getElementById(a)&&document.getElementById(a).classList.contains("work-detail-section")){const l=document.querySelector(`[data-href="#${a}"]`);if(l){const s=document.getElementById("works");s?(s.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{l.click()},500)):l.click()}else k(a)}else if(document.getElementById(a)&&document.getElementById(a).classList.contains("insight-detail-section")){const l=document.querySelector(`[data-href="#${a}"]`);if(l){const s=document.getElementById("insights");s?(s.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{l.click()},500)):l.click()}else f(a)}}window.addEventListener("popstate",function(){const l=window.location.hash.slice(1);if(l){if(document.getElementById(l)&&document.getElementById(l).classList.contains("work-detail-section")){const s=document.querySelector(`[data-href="#${l}"]`);s?s.click():k(l)}else if(document.getElementById(l)&&document.getElementById(l).classList.contains("insight-detail-section")){const s=document.querySelector(`[data-href="#${l}"]`);s?s.click():f(l)}}else d(),h()})});function f(e){document.querySelector(".work-detail-section:not(.hidden), .insight-detail-section:not(.hidden)")&&(document.querySelectorAll(".work-detail-section").forEach(i=>{i.classList.add("hidden")}),document.querySelectorAll(".insight-detail-section").forEach(i=>{i.classList.add("hidden")}),document.querySelector(".works-section").style.display="block",document.querySelector(".insights-section").style.display="block",y(),p());const c=document.querySelector(`.insight-card[data-href="#${e}"]`);if(window.history.pushState(null,null,`#${e}`),c)q(c,()=>{document.querySelector(".insights-section").style.display="none";const i=document.getElementById(e);i&&(i.classList.remove("hidden"),v(e),setTimeout(()=>{I(c)},100))});else{document.querySelector(".insights-section").style.display="none";const i=document.getElementById(e);i&&(i.classList.remove("hidden"),v(e))}}function h(){window.history.pushState(null,null,"/ja/portfolio"),document.querySelectorAll(".work-detail-section").forEach(e=>{e.classList.add("hidden")}),document.querySelectorAll(".insight-detail-section").forEach(e=>{e.classList.add("hidden")}),y(),p(),document.querySelector(".works-section").style.display="block",document.querySelector(".insights-section").style.display="block"}function k(e){document.querySelectorAll(".work-detail-section").forEach(c=>{c.classList.add("hidden")}),document.querySelectorAll(".insight-detail-section").forEach(c=>{c.classList.add("hidden")}),y();const t=document.querySelector(`.work-card[data-href="#${e}"]`)||document.querySelector(`.topic-tile [data-href="#${e}"]`)?.closest(".topic-tile");if(window.history.pushState(null,null,`#${e}`),t)q(t,()=>{document.querySelector(".works-section").style.display="none",document.querySelector(".insights-section").style.display="block";const c=document.getElementById(e);c&&(c.classList.remove("hidden"),T(e),setTimeout(()=>{C(t)},100))});else{document.querySelector(".works-section").style.display="none",document.querySelector(".insights-section").style.display="block";const c=document.getElementById(e);c&&c.classList.remove("hidden")}}function q(e,t){e.classList.add("selected"),setTimeout(()=>{t()},100)}function d(){window.history.pushState(null,null,"/ja/portfolio"),document.querySelectorAll(".work-detail-section").forEach(e=>{e.classList.add("hidden")}),document.querySelectorAll(".insight-detail-section").forEach(e=>{e.classList.add("hidden")}),y(),p(),document.querySelector(".works-section").style.display="block",document.querySelector(".insights-section").style.display="block"}function p(){document.querySelectorAll(".work-card, .insight-card").forEach(t=>{t.classList.remove("selected")})}function C(e){const t=document.querySelector(".work-detail-section:not(.hidden)");if(!t)return;const c=t.querySelector(".selected-card-display"),i=t.querySelector(".selected-card-container");if(!c||!i)return;const n=e.cloneNode(!0);n.classList.remove("clickable-work","selected-simple"),i.innerHTML="",i.appendChild(n),c.style.display="block"}function I(e){const t=document.querySelector(".insight-detail-section:not(.hidden)");if(!t)return;const c=t.querySelector(".selected-card-display"),i=t.querySelector(".selected-card-container");if(!c||!i)return;const n=e.cloneNode(!0);n.classList.remove("clickable-insight","selected-simple"),i.innerHTML="",i.appendChild(n),c.style.display="block"}function y(){document.querySelectorAll(".selected-card-display").forEach(t=>{t.style.display="none"})}function E(e,t="work"){const c=t==="work"?".works-grid":".insights-grid",i=document.querySelector(c);return i?Array.from(i.querySelectorAll(t==="work"?".work-card":".insight-card")).filter(m=>{const a=m.dataset.href;return a&&a!==`#${e}`}).slice(0,3).map(m=>{let a=m.outerHTML;return a=a.replace(t==="work"?'class="work-card clickable-work"':'class="insight-card clickable-insight"',t==="work"?'class="work-card clickable-work related-work-card"':'class="insight-card clickable-insight related-insight-card"'),a}).join(""):(console.error(`å…ƒã®${t}ã‚°ãƒªãƒƒãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`),"")}function T(e){console.log("ğŸ”„ è‡ªå‹•é…ç·šã‚·ã‚¹ãƒ†ãƒ é–‹å§‹:",e);const t=document.querySelector(`#${e} .related-works`);if(t){console.log("âœ… é–¢é€£ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¦‹ã€ãƒ¡ã‚¤ãƒ³ã‚«ãƒ¼ãƒ‰ã‹ã‚‰è‡ªå‹•ç”Ÿæˆ...");const i=`
						<!-- ä¸€è¦§ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ï¼ˆç”»é¢ã„ã£ã±ã„æ¨ªå±•é–‹ï¼‰ -->
						<div class="back-to-list-full-width back-to-list-card">
							ä¸€è¦§ã«æˆ»ã‚‹
						</div>
						
						<!-- ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒˆãƒ« -->
						<h3>ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h3>
						
						<!-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆãƒ¡ã‚¤ãƒ³Worksã‹ã‚‰è‡ªå‹•ã‚³ãƒ”ãƒ¼ãƒ»å®Œå…¨åŒä¸€ï¼‰ -->
						<div class="works-grid">
							${E(e,"work")}
						</div>
					`;t.innerHTML=i,console.log("ğŸ¯ è‡ªå‹•é…ç·šå®Œäº†ã€ã‚«ãƒ¼ãƒ‰æ•°:",t.querySelectorAll(".clickable-work").length);const n=t.querySelector(".works-grid");n?(console.log("ğŸ¨ JavaScriptã§ç›´æ¥ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨é–‹å§‹..."),n.style.display="grid",n.style.gridTemplateColumns="repeat(auto-fit, minmax(280px, 1fr))",n.style.gap="1.5rem",n.style.width="100%",n.style.justifyItems="start",console.log("âœ… JavaScriptã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨å®Œäº†!",n)):console.error("âŒ works-gridè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");const u=t.querySelector(".back-to-list-card");u&&u.addEventListener("click",d)}else console.error("âŒ é–¢é€£ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:",e)}function v(e){console.log("ğŸ”„ Insightsè‡ªå‹•é…ç·šã‚·ã‚¹ãƒ†ãƒ é–‹å§‹:",e);const t=document.querySelector(`#${e} .related-insights`);if(t){console.log("âœ… é–¢é€£Insightsã‚»ã‚¯ã‚·ãƒ§ãƒ³ç™ºè¦‹ã€ãƒ¡ã‚¤ãƒ³ã‚«ãƒ¼ãƒ‰ã‹ã‚‰è‡ªå‹•ç”Ÿæˆ...");const i=`
						<!-- ä¸€è¦§ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ï¼ˆç”»é¢ã„ã£ã±ã„æ¨ªå±•é–‹ï¼‰ -->
						<div class="back-to-list-full-width back-to-list-card">
							ä¸€è¦§ã«æˆ»ã‚‹
						</div>
						
						<!-- ä»–ã®è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ« -->
						<h3>ä»–ã®è¨˜äº‹</h3>
						
						<!-- è¨˜äº‹ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ¡ã‚¤ãƒ³Insightsã‹ã‚‰è‡ªå‹•ã‚³ãƒ”ãƒ¼ãƒ»å®Œå…¨åŒä¸€ï¼‰ -->
						<div class="insights-grid">
							${E(e,"insight")}
						</div>
					`;t.innerHTML=i,console.log("ğŸ¯ Insightsè‡ªå‹•é…ç·šå®Œäº†ã€ã‚«ãƒ¼ãƒ‰æ•°:",t.querySelectorAll(".clickable-insight").length);const n=t.querySelector(".insights-grid");n&&(console.log("ğŸ¨ Insights JavaScriptã§ç›´æ¥ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨é–‹å§‹..."),n.style.display="grid",n.style.gridTemplateColumns="repeat(auto-fit, minmax(280px, 1fr))",n.style.gap="1.5rem",n.style.width="100%",n.style.justifyItems="start",console.log("âœ… Insights JavaScriptã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨å®Œäº†!",n));const u=t.querySelector(".back-to-list-card");u&&u.addEventListener("click",h)}else console.error("âŒ é–¢é€£Insightsã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:",e)}
